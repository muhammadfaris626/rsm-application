import{_ as $}from"./AuthenticatedLayout-CyzdcIiF.js";import{k as n,j as m,l as V,N as F,m as H,Q as g,T as Y,f as R,o as N,a as l,u as x,Z as G,w as r,b as e,e as d,t as o,F as C,s as Z,c as K}from"./app-u2Np7Bca.js";import{s as D}from"./vue-multiselect.esm-qU12joe5.js";import{_ as S}from"./TextInput-Ab--07a-.js";import{m as E}from"./vue3-apexcharts-CVd5880e.js";import{T as Q,a as q,_ as h,b as f}from"./TableDataCell-Bx9aZHfI.js";/* empty css                                                                 */import"./_plugin-vue_export-helper-DlAUqK2U.js";const J={class:"grid grid-cols-1 h-full gap-4"},W={class:"flex justify-between"},X={class:"flex justify-start"},ee={class:"w-56"},te={class:"w-56"},ae={class:"flex justify-end"},se={class:"w-64"},le={class:"w-30"},re={class:"w-30"},oe={class:"grid grid-cols-5 gap-4"},ne={class:"bg-white rounded-xl shadow-lg"},ie={class:"uppercase text-center text-3xl p-4 text-green-500 font-bold"},de={class:"bg-white rounded-xl shadow-lg"},ue={class:"uppercase text-center text-3xl p-4 text-red-500 font-bold"},pe={class:"bg-white rounded-xl shadow-lg"},ce={class:"uppercase text-center text-3xl p-4 text-yellow-500 font-bold"},me={class:"bg-white rounded-xl shadow-lg"},xe={class:"uppercase text-center text-3xl p-4 text-purple-500 font-bold"},ge={class:"bg-white rounded-xl shadow-lg"},he={class:"uppercase text-center text-3xl p-4 text-blue-500 font-bold"},fe={class:"grid grid-cols-3 gap-4"},be={class:"grid grid-cols-1 border-2 rounded-xl bg-white"},ve={class:"grid grid-cols-2 gap-4 px-4 pt-2 text-center"},we={class:"text-xl font-semibold text-green-500"},ye={class:"text-xl font-semibold text-red-500"},_e={class:"border-2 rounded-xl bg-white",style:{height:"400px",display:"flex","flex-direction":"column"}},ke={class:"font-thin uppercase text-center bg-blue-500 rounded-t-xl text-white flex items-center justify-center py-3"},je={style:{"flex-grow":"1"}},Pe={class:"border-2 rounded-xl bg-white",style:{height:"400px",display:"flex","flex-direction":"column"}},Te={style:{"flex-grow":"1"}},Ce={__name:"IndexReport",props:["branches","sales","expenditures","purchases","orders","returns","penjualanTahunan","topPenjualan","allData"],setup(p){const _=n(""),k=n(""),j=n("");let b=n(_),v=n(k),w=n(j);const M=m(()=>{let a=new URL(route("reports.index"));return b.value&&a.searchParams.append("branch",b.value.id),v.value&&w.value&&(a.searchParams.append("start_date",v.value),a.searchParams.append("end_date",w.value)),a});V(()=>M.value,a=>{F.visit(a,{preserveScroll:!0,preserveState:!0,replace:!0})}),H(()=>{window.location.search&&F.visit(route("reports.index"),{replace:!0})});function c(a){return new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(a)}const z=m(()=>g().props.expenditures||[]),L=m(()=>({chart:{height:"100%",type:"area",zoom:{enabled:!1},toolbar:{show:!1}},colors:["#0E9F6E","#F05252"],dataLabels:{enabled:!1},stroke:{curve:"smooth"},xaxis:{type:"datetime",categories:g().props.sales.map(a=>a.date)},tooltip:{x:{format:"dd/MM/yy HH:mm"}}})),U=m(()=>[{name:"Omzet",data:g().props.sales.map(a=>a.total_price)},{name:"Pengeluaran",data:z.value.map(a=>a.total_cost)}]),A=n({chart:{id:"vuechart-example",toolbar:{show:!1}},plotOptions:{bar:{horizontal:!0}},xaxis:{categories:g().props.topPenjualan.map(a=>a.branch_name)}}),I=n([{name:"Total Penjualan",data:g().props.topPenjualan.map(a=>a.total_sales??0)}]),y=m(()=>g().props.penjualanTahunan||{});m(()=>({chart:{id:"vuechart-example",toolbar:{show:!1}},xaxis:{categories:Object.keys(y.value)}})),m(()=>[{name:"Penjualan",data:Object.values(y.value)}]);const B=n({series:[{name:"Inflation",data:Object.values(y.value)}],chart:{height:350,type:"bar",toolbar:{show:!1}},plotOptions:{bar:{borderRadius:10,dataLabels:{position:"top"}}},dataLabels:{enabled:!0,formatter:a=>`Rp ${a}`,offsetY:-20,style:{fontSize:"10px",colors:["#304758"]}},xaxis:{categories:Object.keys(y.value),position:"top",axisBorder:{show:!1},axisTicks:{show:!1},crosshairs:{fill:{type:"gradient",gradient:{colorFrom:"#D8E3F0",colorTo:"#BED1E6",stops:[0,100],opacityFrom:.4,opacityTo:.5}}},tooltip:{enabled:!0}},yaxis:{axisBorder:{show:!1},axisTicks:{show:!1},labels:{show:!1,formatter:a=>`${a}%`}},title:{text:`Penjualan Tahunan ${new Date().getFullYear()}`,floating:!0,offsetY:330,align:"center",style:{color:"#444"}}}),P=n(""),O=n([{id:1,pilihan:"Omzet"},{id:2,pilihan:"Pengeluaran"},{id:3,pilihan:"Pembelian Persediaan"},{id:4,pilihan:"Permintaan Stok"},{id:5,pilihan:"Permintaan Return"}]),u=Y({pilihan:"",branch_id:"",tanggal_mulai:"",tanggal_selesai:""});V(P,a=>{u.pilihan=a.pilihan,u.branch_id=b.value.id,u.tanggal_mulai=v,u.tanggal_selesai=w;const t=route("cetak",u);window.open(t,"_blank")});const T=n("");return V(T,a=>{u.pilihan=a.pilihan,u.branch_id=b.value.id,u.tanggal_mulai=v,u.tanggal_selesai=w;const t=route("export",u);window.open(t)}),(a,t)=>(N(),R(C,null,[l(x(G),{title:"Laporan"}),l($,null,{default:r(()=>[e("div",J,[t[23]||(t[23]=e("div",{class:"pb-4 border-b-2 border-dashed dark:border-gray-700"},[e("nav",{class:"flex","aria-label":"Breadcrumb"},[e("ol",{class:"inline-flex items-center space-x-1 md:space-x-2 rtl:space-x-reverse"},[e("li",{class:"inline-flex items-center"},[e("a",{href:"#",class:"inline-flex items-center text-sm font-medium text-gray-700 hover:text-blue-600 dark:text-gray-400 dark:hover:text-white"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"mr-1 flex-shrink-0 w-5 h-5 text-gray-500 transition duration-75 group-hover:text-gray-900 dark:text-gray-400 dark:group-hover:text-white"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M10.5 6h9.75M10.5 6a1.5 1.5 0 1 1-3 0m3 0a1.5 1.5 0 1 0-3 0M3.75 6H7.5m3 12h9.75m-9.75 0a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m-3.75 0H7.5m9-6h3.75m-3.75 0a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m-9.75 0h9.75"})]),d(" Manajemen ")])]),e("li",{"aria-current":"page"},[e("div",{class:"flex items-center"},[e("svg",{class:"rtl:rotate-180 w-3 h-3 text-gray-400 mx-1","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 6 10"},[e("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m1 9 4-4-4-4"})]),e("span",{class:"ms-1 text-sm font-medium text-gray-500 md:ms-2 dark:text-gray-400"},"Laporan")])])])])],-1)),e("div",W,[e("div",null,[e("div",X,[t[5]||(t[5]=e("div",{class:"flex items-center justify-start mr-2"}," Cetak : ",-1)),e("div",ee,[l(x(D),{modelValue:P.value,"onUpdate:modelValue":t[0]||(t[0]=s=>P.value=s),options:O.value,"close-on-select":!0,placeholder:"Pilih cetak",label:"pilihan","track-by":"id"},null,8,["modelValue","options"])]),t[6]||(t[6]=e("div",{class:"flex items-center justify-start mr-2 ml-2"}," Export : ",-1)),e("div",te,[l(x(D),{modelValue:T.value,"onUpdate:modelValue":t[1]||(t[1]=s=>T.value=s),options:O.value,"close-on-select":!0,placeholder:"Pilih export",label:"pilihan","track-by":"id"},null,8,["modelValue","options"])])])]),e("div",null,[e("div",ae,[t[7]||(t[7]=e("div",{class:"flex items-center justify-start mx-2"}," Cabang : ",-1)),e("div",se,[l(x(D),{modelValue:_.value,"onUpdate:modelValue":t[2]||(t[2]=s=>_.value=s),options:p.branches,"close-on-select":!0,placeholder:"Pilih cabang",label:"branch_name","track-by":"id"},null,8,["modelValue","options"])]),t[8]||(t[8]=e("div",{class:"flex items-center justify-start mx-2"}," Dari : ",-1)),e("div",le,[l(S,{id:"name",type:"date",class:"block w-full bg-white",modelValue:k.value,"onUpdate:modelValue":t[3]||(t[3]=s=>k.value=s)},null,8,["modelValue"])]),t[9]||(t[9]=e("div",{class:"flex items-center justify-start mx-2"}," Sampai : ",-1)),e("div",re,[l(S,{id:"name",type:"date",class:"block w-full bg-white",modelValue:j.value,"onUpdate:modelValue":t[4]||(t[4]=s=>j.value=s)},null,8,["modelValue"])])])])]),e("div",oe,[e("div",ne,[t[10]||(t[10]=e("p",{class:"font-thin uppercase text-center py-1 bg-green-500 rounded-t-xl text-white"},[e("strong",null,"Omzet")],-1)),e("p",ie,o(c((p.sales||[]).reduce((s,i)=>s+Number(i.total_price),0))),1)]),e("div",de,[t[11]||(t[11]=e("p",{class:"font-thin uppercase text-center py-1 bg-red-500 rounded-t-xl text-white"},[e("strong",null,"Pengeluaran")],-1)),e("p",ue,o(c(p.expenditures.reduce((s,i)=>s+Number(i.total_cost),0))),1)]),e("div",pe,[t[12]||(t[12]=e("p",{class:"font-thin uppercase text-center py-1 bg-yellow-500 rounded-t-xl text-white"},[e("strong",null,"Permintaan Stok")],-1)),e("p",ce,o(p.orders.length),1)]),e("div",me,[t[13]||(t[13]=e("p",{class:"font-thin uppercase text-center py-1 bg-purple-500 rounded-t-xl text-white"},[e("strong",null,"Permintaan Return")],-1)),e("p",xe,o(p.returns.length),1)]),e("div",ge,[t[14]||(t[14]=e("p",{class:"font-thin uppercase text-center py-1 bg-blue-500 rounded-t-xl text-white"},[e("strong",null,"Pembelian Persediaan")],-1)),e("p",he,o(c(p.purchases.reduce((s,i)=>s+Number(i.total_price),0)??0)),1)])]),e("div",fe,[e("div",be,[e("div",ve,[e("div",null,[t[15]||(t[15]=e("p",{class:"text-green-500"},"Omzet",-1)),e("p",we,o(c(p.sales.reduce((s,i)=>s+Number(i.total_price),0)??0)),1)]),e("div",null,[t[16]||(t[16]=e("p",{class:"text-red-500"},"Pengeluaran",-1)),e("p",ye,o(c(p.expenditures.reduce((s,i)=>s+Number(i.total_cost),0))),1)])]),e("div",null,[l(x(E),{type:"area",options:L.value,series:U.value},null,8,["options","series"])])]),e("div",_e,[e("p",ke,[e("strong",null,"Penjualan "+o(new Date().getFullYear()),1)]),e("div",je,[l(x(E),{type:"bar",height:"95%",options:B.value,series:B.value.series},null,8,["options","series"])])]),e("div",Pe,[t[17]||(t[17]=e("p",{class:"font-thin uppercase text-center bg-blue-500 rounded-t-xl text-white flex items-center justify-center py-3"},[e("strong",null,"Top #10 Penjualan Cabang")],-1)),e("div",Te,[l(x(E),{type:"bar",height:"95%",options:A.value,series:I.value},null,8,["options","series"])])])]),e("div",null,[l(Q,null,{header:r(()=>[l(f,null,{default:r(()=>t[18]||(t[18]=[d("No")])),_:1}),l(f,null,{default:r(()=>t[19]||(t[19]=[d("CABANG")])),_:1}),l(f,null,{default:r(()=>t[20]||(t[20]=[d("OMZET")])),_:1}),l(f,null,{default:r(()=>t[21]||(t[21]=[d("PENGELUARAN")])),_:1}),l(f,{class:"text-center"},{default:r(()=>t[22]||(t[22]=[d("PERMINTAAN STOK")])),_:1})]),default:r(()=>[(N(!0),R(C,null,Z(p.allData,(s,i)=>(N(),K(q,{key:s.id,class:"bg-white border-b dark:bg-gray-800 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600"},{default:r(()=>[l(h,{status:"number"},{default:r(()=>[d(o(i+1),1)]),_:2},1024),l(h,{status:"record"},{default:r(()=>[d(o(s.branch_name),1)]),_:2},1024),l(h,{status:"record"},{default:r(()=>[d(o(c(s.omzet)),1)]),_:2},1024),l(h,{status:"record"},{default:r(()=>[d(o(c(s.pengeluaran)),1)]),_:2},1024),l(h,{status:"record",class:"text-center"},{default:r(()=>[d(o(s.permintaan_pesanan.length),1)]),_:2},1024)]),_:2},1024))),128))]),_:1})])])]),_:1})],64))}};export{Ce as default};

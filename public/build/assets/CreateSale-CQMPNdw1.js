import{T as q,l as M,j as p,Q as y,f as u,o as m,a as l,u as r,Z as $,w as b,b as e,e as g,i as w,d as S,g as V,F as B,s as H,t as f,E as A}from"./app-u2Np7Bca.js";import{_ as Z}from"./AuthenticatedLayout-CyzdcIiF.js";import{_ as c}from"./InputLabel-BITUvn14.js";import{_ as i}from"./InputError-BrNOI4E1.js";import{_ as v}from"./TextInput-Ab--07a-.js";import{s as x}from"./vue-multiselect.esm-qU12joe5.js";import{b as h}from"./index-BW2rsV1E.js";/* empty css                                                                 */const E={class:"grid grid-cols-1 h-full"},L={class:"pb-4 border-b-2 border-dashed dark:border-gray-700"},R={class:"flex","aria-label":"Breadcrumb"},F={class:"inline-flex items-center space-x-1 md:space-x-2 rtl:space-x-reverse"},D={class:"flex items-center"},I={class:"pt-4"},J={class:"grid grid-cols-3 gap-2 mt-2 bg-white p-4 rounded-xl"},G={class:"bg-white p-4 rounded-xl"},K={key:0,class:"relative flex flex-col rounded-lg bg-white shadow-sm border border-slate-200 mb-4"},O={class:"flex flex-col gap-1 p-1.5"},Q={class:"text-slate-800 flex w-full items-center rounded-md pt-2 pl-3 transition-all"},z={class:"mr-2 text-lg font-semibold"},W={class:"grid grid-cols-5 gap-2 w-full"},X={class:"col-span-2"},Y={class:"ml-2 grid place-items-center justify-self-end"},ee=["onClick"],te={key:0,class:"table-auto text-xs ml-12 text-gray-500"},re={class:"mt-6"},le={components:{VueNumber:h},data(){return{number:{decimal:",",separator:".",precision:2,masked:!1}}}},ce=Object.assign(le,{__name:"CreateSale",props:{invoice:{type:String},branches:{type:Array},products:{type:Array},employees:{type:Array}},setup(P){const _=P,s=q({branch_id:"",invoice_number:_.invoice,date:"",management_structure_id:"",products:[]}),U=()=>{s.products.push({branch_product_id:"",price:"",quantity:"",total_price:""})},C=o=>{s.products.splice(o,1)};M(()=>s.products.map(o=>({price:o.price,quantity:o.quantity})),o=>{o.forEach((t,a)=>{s.products[a].total_price=((t.price||0)*(t.quantity||0)).toString()})},{deep:!0});const T=p(()=>y().props.products??[]),j=p(()=>T.value.map(o=>{var t;return{id:o.id,label:`${(t=o.product_id)==null?void 0:t[0].product_name}`,stock:o.quantity||0,serial_barcode:o.serial_barcode,tanggal:o.created_at}}),{}),N=p(()=>y().props.employees.map(o=>{var t;return{...o,label:`${(t=o.employee_id[0])==null?void 0:t.name}`}}));return(o,t)=>(m(),u(B,null,[l(r($),{title:"Tambah Penjualan"}),l(Z,null,{default:b(()=>[e("div",E,[e("div",L,[e("nav",R,[e("ol",F,[t[7]||(t[7]=e("li",{class:"inline-flex items-center"},[e("a",{href:"#",class:"inline-flex items-center text-sm font-medium text-gray-700 hover:text-blue-600 dark:text-gray-400 dark:hover:text-white"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"mr-1 flex-shrink-0 w-5 h-5 text-gray-500 transition duration-75 group-hover:text-gray-900 dark:text-gray-400 dark:group-hover:text-white"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m20.25 7.5-.625 10.632a2.25 2.25 0 0 1-2.247 2.118H6.622a2.25 2.25 0 0 1-2.247-2.118L3.75 7.5M10 11.25h4M3.375 7.5h17.25c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125Z"})]),g(" Produk ")])],-1)),e("li",null,[e("div",D,[t[6]||(t[6]=e("svg",{class:"rtl:rotate-180 w-3 h-3 text-gray-400 mx-1","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 6 10"},[e("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m1 9 4-4-4-4"})],-1)),l(r(w),{href:o.route("sales.index"),class:"ms-1 text-sm font-medium text-gray-700 hover:text-blue-600 md:ms-2 dark:text-gray-400 dark:hover:text-white"},{default:b(()=>t[5]||(t[5]=[g("Data Penjualan")])),_:1},8,["href"])])]),t[8]||(t[8]=e("li",{"aria-current":"page"},[e("div",{class:"flex items-center"},[e("svg",{class:"rtl:rotate-180 w-3 h-3 text-gray-400 mx-1","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 6 10"},[e("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m1 9 4-4-4-4"})]),e("span",{class:"ms-1 text-sm font-medium text-gray-500 md:ms-2 dark:text-gray-400"},"Tambah Penjualan")])],-1))])])]),e("div",I,[t[17]||(t[17]=e("h1",{class:"text-xl font-semibold text-blue-600"},"TAMBAH PENJUALAN",-1)),e("form",{onSubmit:t[4]||(t[4]=S(a=>r(s).post(o.route("sales.store")),["prevent"]))},[e("div",J,[e("div",null,[l(c,{for:"invoice_number",value:"Nomor Faktur"}),l(v,{id:"invoice_number",type:"text",class:"mt-1 block w-full bg-slate-300",modelValue:r(s).invoice_number,"onUpdate:modelValue":t[0]||(t[0]=a=>r(s).invoice_number=a),disabled:""},null,8,["modelValue"]),l(i,{class:"mt-2",message:r(s).errors.invoice_number},null,8,["message"])]),e("div",null,[l(c,{for:"branch_id",value:"Cabang"}),l(r(x),{modelValue:r(s).branch_id,"onUpdate:modelValue":t[1]||(t[1]=a=>r(s).branch_id=a),options:_.branches,"close-on-select":!0,placeholder:"Pilih",label:"branch_name","track-by":"id"},null,8,["modelValue","options"]),l(i,{class:"mt-2",message:r(s).errors.branch_id},null,8,["message"])]),e("div",null,[l(c,{for:"date",value:"Tanggal"}),l(v,{id:"date",type:"date",class:"mt-1 block w-full",modelValue:r(s).date,"onUpdate:modelValue":t[2]||(t[2]=a=>r(s).date=a)},null,8,["modelValue"]),l(i,{class:"mt-2",message:r(s).errors.date},null,8,["message"])]),e("div",null,[l(c,{for:"management_structure_id",value:"Teknisi"}),l(r(x),{modelValue:r(s).management_structure_id,"onUpdate:modelValue":t[3]||(t[3]=a=>r(s).management_structure_id=a),options:N.value,"close-on-select":!0,placeholder:"Pilih",label:"label","track-by":"id"},null,8,["modelValue","options"]),l(i,{class:"mt-2",message:r(s).errors.management_structure_id},null,8,["message"])])]),t[16]||(t[16]=e("h1",{class:"text-xl font-semibold text-blue-600 my-2"},"TAMBAH BARANG",-1)),e("div",G,[r(s).products.length>0?(m(),u("div",K,[e("nav",O,[(m(!0),u(B,null,H(r(s).products,(a,n)=>{var k;return m(),u("div",{key:n},[e("div",Q,[e("h1",z,f(n+1)+".",1),e("div",W,[e("div",X,[l(r(x),{class:"bg-white",modelValue:a.branch_product_id,"onUpdate:modelValue":d=>a.branch_product_id=d,options:j.value,"close-on-select":!0,placeholder:"Pilih Barang",label:"label","track-by":"id",id:"product_id_"+n},null,8,["modelValue","onUpdate:modelValue","options","id"]),l(i,{class:"mt-2",message:r(s).errors["products."+n+".product_id"]},null,8,["message"])]),e("div",null,[l(r(h),A({prefix:"Rp ",class:"border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",modelValue:a.price,"onUpdate:modelValue":d=>a.price=d,id:"price_"+n,placeholder:"Harga Barang",ref_for:!0},o.number),null,16,["modelValue","onUpdate:modelValue","id"]),l(i,{class:"mt-2",message:r(s).errors["products."+n+".price"]},null,8,["message"])]),e("div",null,[l(v,{id:"quantity_"+n,type:"text",class:"block w-full bg-white",placeholder:"Jumlah Barang",modelValue:a.quantity,"onUpdate:modelValue":d=>a.quantity=d},null,8,["id","modelValue","onUpdate:modelValue"]),l(i,{class:"mt-2",message:r(s).errors["products."+n+".quantity"]},null,8,["message"])]),e("div",null,[l(r(h),A({prefix:"Rp ",class:"bg-slate-300 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",modelValue:a.total_price,"onUpdate:modelValue":d=>a.total_price=d,id:"total_price_"+n,placeholder:"Rp 0",ref_for:!0},o.number,{disabled:""}),null,16,["modelValue","onUpdate:modelValue","id"])])]),e("div",Y,[e("button",{onClick:d=>C(n),class:"rounded-md border border-transparent p-2.5 text-center text-sm transition-all bg-red-500 text-white hover:bg-red-600 disabled:pointer-events-none disabled:opacity-50 disabled:shadow-none",type:"button"},t[9]||(t[9]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"w-4 h-4"},[e("path",{"fill-rule":"evenodd",d:"M16.5 4.478v.227a48.816 48.816 0 0 1 3.878.512.75.75 0 1 1-.256 1.478l-.209-.035-1.005 13.07a3 3 0 0 1-2.991 2.77H8.084a3 3 0 0 1-2.991-2.77L4.087 6.66l-.209.035a.75.75 0 0 1-.256-1.478A48.567 48.567 0 0 1 7.5 4.705v-.227c0-1.564 1.213-2.9 2.816-2.951a52.662 52.662 0 0 1 3.369 0c1.603.051 2.815 1.387 2.815 2.951Zm-6.136-1.452a51.196 51.196 0 0 1 3.273 0C14.39 3.05 15 3.684 15 4.478v.113a49.488 49.488 0 0 0-6 0v-.113c0-.794.609-1.428 1.364-1.452Zm-.355 5.945a.75.75 0 1 0-1.5.058l.347 9a.75.75 0 1 0 1.499-.058l-.346-9Zm5.48.058a.75.75 0 1 0-1.498-.058l-.347 9a.75.75 0 0 0 1.5.058l.345-9Z","clip-rule":"evenodd"})],-1)]),8,ee)])]),((k=a.branch_product_id)==null?void 0:k.stock)!=null?(m(),u("table",te,[e("tbody",null,[e("tr",null,[t[10]||(t[10]=e("td",null,"Stok Tersedia",-1)),t[11]||(t[11]=e("td",null,":",-1)),e("td",null,f(a.branch_product_id.stock),1)]),e("tr",null,[t[12]||(t[12]=e("td",null,"Tanggal Barang",-1)),t[13]||(t[13]=e("td",null,":",-1)),e("td",null,f(a.branch_product_id.tanggal),1)])])])):V("",!0)])}),128))])])):V("",!0),e("div",{class:"flex-flex-row-reverse space-x-4 space-x-reverse justify-center"},[e("div",{class:"text-center"},[e("button",{onClick:U,type:"button",class:"px-5 py-2 text-sm font-medium text-white inline-flex items-center bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 rounded-lg text-center"}," Tambah Barang ")])])]),e("div",re,[t[15]||(t[15]=e("button",{type:"submit",class:"text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2 me-2 mb-2 dark:bg-blue-600 dark:hover:bg-blue-700 focus:outline-none dark:focus:ring-blue-800"},"SIMPAN",-1)),l(r(w),{href:o.route("sales.index"),class:"text-white bg-red-700 hover:bg-red-800 focus:ring-4 focus:ring-red-300 font-medium rounded-lg text-sm px-5 py-2.5 me-2 mb-2 dark:bg-red-600 dark:hover:bg-red-700 focus:outline-none dark:focus:ring-red-800"},{default:b(()=>t[14]||(t[14]=[g("KEMBALI")])),_:1},8,["href"])])],32)])])]),_:1})],64))}});export{ce as default};
